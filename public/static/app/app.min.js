var app=angular.module("qmgj_unlogin",["ui.router","ui.bootstrap"]);app.config(["$stateProvider","$urlRouterProvider",function(t,e){e.otherwise("/login"),t.state("home",{url:"/home",templateUrl:"static/app/view/homeView.html",controller:"homeController"}).state("reg",{url:"/reg",templateUrl:"static/app/view/regView.html",controller:"regController"}).state("login",{url:"/login",templateUrl:"static/app/view/loginView.html",controller:"loginController"}).state("list",{url:"/list",templateUrl:"static/app/view/listView.html",controller:"listController"}).state("list2",{url:"/list/:keyword",templateUrl:"static/app/view/listView.html",controller:"listController"})}]),app.filter("substr",function(){return function(){var t=arguments[0],e=arguments[1],r=arguments[2];return void 0==r&&(r=arguments[1],e=0),void 0==e&&(e=0,r=t.length),t.substr(e,r)}}),app.filter("getMoon",function(){return function(t){var e=new Date(parseInt(t)).getHours(),r="";return r=e>=6&&12>e?"上午":e>=12&&14>e?"中午":e>=14&&18>e?"下午":e>=18&&24>e?"晚上":"凌晨"}});
var app2=angular.module("qmgj_login",["ui.router","ui.bootstrap"]);app2.config(["$stateProvider","$urlRouterProvider",function(t,e){e.otherwise("/vip/main"),t.state("home",{url:"/home",templateUrl:"static/app/view/homeView.html",controller:"homeController"}).state("vip",{url:"/vip",templateUrl:"static/app/view/vipView.html",controller:"vipController"}).state("vip.main",{url:"/main",templateUrl:"static/app/view/vip.mainView.html",controller:"vipMainController"}).state("vip.info",{url:"/info",templateUrl:"static/app/view/vip.infoView.html",controller:"vipInfoController"}).state("vip.record",{url:"/record",templateUrl:"static/app/view/vip.recordView.html",controller:"vipRecordController"}).state("list",{url:"/list",templateUrl:"static/app/view/listView.html",controller:"listController"}).state("list2",{url:"/list/:keyword",templateUrl:"static/app/view/listView.html",controller:"listController"})}]),app2.controller("logoutController",["$scope","$http",function(t,e){t.userLogout=function(){e({url:"/user/logout"}).then(function(t){"0000"==t.data.resultCode&&(alert("退出成功"),location.reload())})}}]),app2.filter("substr",function(){return function(){var t=arguments[0],e=arguments[1],r=arguments[2];return void 0==r&&(r=arguments[1],e=0),void 0==e&&(e=0,r=t.length),t.substr(e,r)}}),app2.filter("getMoon",function(){return function(t){var e=new Date(parseInt(t)).getHours(),r="";return r=e>=6&&12>e?"上午":e>=12&&14>e?"中午":e>=14&&18>e?"下午":e>=18&&24>e?"晚上":"凌晨"}});
function myHomeController(t,e,n){t.hotNav=["","微电影","电视剧","话剧","电影","戏曲","书画","相声","戏剧","音乐剧"];var o={init:function(){var t=this;e({url:"/IndexInfo",method:"get"}).then(function(e){"0000"==e.data.resultCode?(t.dealSlide(e.data.result.slides),t.dealHot(e.data.result.hot),t.dealTV(e.data.result.new),t.dealUnit(e.data.result.unit)):alert(e.data.resultMsg)})},dealSlide:function(e){t.slideData=e,t.showIndex=0;var o=n(function(){t.showIndex++,t.showIndex==t.slideData.length&&(t.showIndex=0)},1500);t.pauseSlide=function(e){n.cancel(o),t.showIndex=e},t.playSlide=function(){o=n(function(){t.showIndex++,t.showIndex==t.slideData.length&&(t.showIndex=0)},1500)}},dealHot:function(e){t.hotData=e,t.hotItem=e[0],t.hotIndex=0,t.showHotItem=function(n){t.hotIndex=n,t.hotItem=e[n]}},dealTV:function(e){t.tvData=e},dealUnit:function(e){t.unitData=e}};o.init()}app.controller("homeController",["$scope","$http","$interval",myHomeController]),app2.controller("homeController",["$scope","$http","$interval",myHomeController]);
function myListController(t,a,e){var s=["全部","微电影","电视剧","话剧","电影","戏曲","书画","相声","戏剧","音乐剧","其它"];t.arr=s;var o={init:function(){var a=this;t.cid=0,t.status=0,t.timeStatus=0,t.countAll=0,t.keyword="",t.count=9,t.page=1,void 0!=e.keyword&&(t.keyword=e.keyword),a.events(),a.getListData()},events:function(){var a=this;t.pageChanged=function(){a.getListData()},t.changeType=function(e){t.cid=e,t.page=1,a.getListData()},t.changeStatus=function(e){t.status=e,t.page=1,a.getListData()},t.checkTimeStatus=function(e){t.timeStatus=e,t.page=1,a.getListData()}},getListData:function(){a({url:"/prolist",method:"get",params:{keyword:t.keyword,cid:t.cid,status:t.status,timeStatus:t.timeStatus,page:t.page,count:t.count}}).then(function(a){if("0000"==a.data.resultCode){var e=a.data.result;t.countAll=e.countAll,t.count=e.count,t.listData=e.list}else alert(a.data.resultMsg)})}};o.init()}app.controller("listController",["$scope","$http","$stateParams",myListController]),app2.controller("listController",["$scope","$http","$stateParams",myListController]);
app.controller("loginController",["$scope","$http","$state","$stateParams",function(t,o){t.loginClick=function(){t.myform.$valid&&o({url:"/user/login",method:"post",data:{phone:t.phone,password:t.pwd}}).then(function(t){"0000"==t.data.resultCode?(alert("登录成功"),location.reload()):alert(t.data.resultMsg)})}}]);
app.controller("regController",["$scope","$http","$state",function(e,t,o){e.regClick=function(){e.myform.$valid&&e.pwd==e.pwd2&&t({url:"/user/reg",method:"post",data:{name:e.username,phone:e.phone,password:e.pwd,passwordRepeat:e.pwd2}}).then(function(e){"0000"==e.data.resultCode?(alert("注册成功，请登录"),o.go("login")):alert(e.data.resultMsg)})}}]);
function mySearchController(e,r){e.myKeyUp=function(e){if(13==e.keyCode){var o=angular.element(e.target).val();r.go("list2",{keyword:o})}}}app.controller("searchController",["$scope","$state",mySearchController]),app2.controller("searchController",["$scope","$state",mySearchController]);
app.controller("userController",["$scope","$http",function(o,t){o.userLogout=function(){t({url:"/user/logout"}).success(function(o){"0000"==o.resultCode&&location.reload()})}}]);
app2.controller("vipController",["$scope","$http","$rootScope","$state",function(o,t){t({url:"/user/info",method:"post"}).then(function(t){o.userinfo=t.data.result})}]);
app2.controller("vipInfoController",["$scope",function(e){e.cipArr=["微电影","电视剧","话剧","电影","戏曲","书画","相声","戏剧","音乐剧"],e.fileNameChanged=function(e){},e.checkbox=function(e){var a=angular.element(e.target);a.toggleClass("active")},e.radio=function(e){var a=angular.element(e.target);a.parent().children().removeClass("active"),a.addClass("active")},e.submit=function(){for(var e=(angular.element(document.querySelectorAll(".info-radio.active")),angular.element(document.querySelectorAll(".info-checkbox.active"))),a=[],t=0;t<e.length;t++)a.push(e.eq(t).attr("data-value"))}}]);
app2.controller("vipMainController",["$scope","$http",function(r,o){o({url:"/user/pros"}).then(function(o){r.procare=o.data.result.procare,r.prohot=o.data.result.prohot})}]);
app2.controller("vipRecordController",["$scope","$http",function(t,e){var a={init:function(){t.type=0,t.maxSize=5,t.countAll=0,t.page=1,t.count=5,this.events(),this.getRecordData()},events:function(){var e=this;t.pageChanged=function(){e.getRecordData()},t.changeType=function(a){t.type=a,t.page=1,t.count=5,e.getRecordData()}},getRecordData:function(){e({url:"/user/RecordList",method:"post",data:{type:t.type,page:t.page,count:t.count}}).then(function(e){if("0000"==e.data.resultCode){var a=e.data.result;t.countAll=e.data.result.count,t.recordData=a.list}else alert(e.data.resultMsg)})}};a.init()}]);